测试驱动开发，顾名思义，就是将软件需求转化为一组自动化测试，然后再根据测试描绘的场景，逐步实现软件功能的开发方法。

TDD 的基本原则：

* 当且仅当存在失败的自动化测试时，才开始编写生产代码；
* 消除坏味道

根据 TDD 的基本原则，Kent Beck 将开发工作分成了三步，也就是后世广为流传的测试驱动开发咒语——红 / 绿 / 重构（Red/Green/Refactoring）：

红：编写一个失败的小测试，甚至可以是无法编译的测试；

绿：让这个测试快速通过，甚至不惜犯下任何罪恶；

重构：消除上一步中产生的所有重复（坏味道）。

使用任务分解法来找到测试：

* 大致构思软件被使用的方式，把握对外接口的方向；

* 大致构思功能的实现方式，划分所需的组件（Component）以及组件间的关系（所谓的架构）。当然，如果没思路，也可以不划分；

* 根据需求的功能描述拆分功能点，功能点要考虑正确路径（Happy Path）和边界条件（Sad Path）；

* 依照组件以及组件间的关系，将功能拆分到对应组件；

* 针对拆分的结果编写测试，进入红 / 绿 / 重构循环。

### API 构思与组件划分

首先我们需要考虑，别人将以何种方式使用这段代码，也就是这段代码的整体对外接口部分。我们可以通过写测试的方式，来感受 API 的友好程度。

> 通过写测试能感受到API的友好程度，也可以感受到API是否有坏味道。

构思这段代码将如何被用户使用。通过先编写测试的方式，假设这段代码已经实现了，在测试中调用这段代码。看看对外的接口和编程风格时不时合适的。

理解需求，并通过测试构成高效的节奏，是有效实施 TDD 的前提。应该避免完全依赖重构而不去做设计。

























